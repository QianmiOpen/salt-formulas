name: zookeeper
remark: 用于zookeeper项目的自动部署

actions:
  - name: 部署zookeeper
    css: glyphicon glyphicon-import
    steps:
      - name: 加固os
        sls: "salt {{machine}} state.sls saltenv='{{scriptVersion}}' os.security"
      - name: 安装ntp服务
        sls: "salt {{machine}} state.sls saltenv='{{scriptVersion}}' ntp"
      - name: 编译安装zookeeper
        sls: "salt {{machine}} state.sls saltenv='{{scriptVersion}}' zookeeper"


  - name: 重启zookeeper
    css: glyphicon glyphicon-repeat
    steps:
      - name: 重启zookeeper
        sls: "salt {{machine}} state.sls saltenv='{{scriptVersion}}' zookeeper.restart"

  - name: 启动应用
    css: glyphicon glyphicon-play
    steps:
      - name: 启动zookeeper应用
        sls: "salt {{machine}} state.sls saltenv='{{scriptVersion}}' zookeeper.start"

  - name: 停止应用
    css: glyphicon glyphicon-stop
    steps:
      - name: 关闭应用
        sls: "salt {{machine}} state.sls saltenv='{{scriptVersion}}' zookeeper.stop"
